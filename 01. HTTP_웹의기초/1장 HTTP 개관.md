날짜 : 2023-03-22

태그 : #HTTP완벽가이드 #HTTP_웹의기초

# 1. HTTP 개관
## 1.1 HTTP : 인터넷의 멀티미디어 배달부

HTTP(Hypertext Transfer Protocol) - 하이퍼 텍스트 전송 프로토콜
1. HTTP는 신뢰성 있는 데이터 전송 프로토콜을 사용한다. - TCP/IP 프로토콜
2. 전송 중 손상되거나 꼬이지 않음을 보장한다.

## 1.2 웹 클라이언트 서버

웹 서버 - HTTP프로토콜로 의사소통하기 때문에 HTTP 서버라고도 불린다.
클라이언트는 서버에게 HTTP요청을 보내고 서버는 요청된 데이터를 HTTP 응답으로 돌려준다.

예시) http://www.oreilly.com/index.html 이 있을때
1) http:// 는 HTTP요청을
2) www.oreilly.com 서버로 보낸다
3) /index.html index.html객체를 요청 보낸다.
4) 성공한다면, 서버는 타입, 길이등의 정보와 함께 HTTP 응답에 실어서 클라이언트에게 보낸다.

## 1.3 리소스

단순한 웹 리소스 : 정적 파일(html파일, 텍스트파일, JPEG이미지 파일 등등)
동적 콘텐츠 리소스 : 어떤 정보를 요청?, 사용자가 누구?, 온라인 쇼핑몰에서 선물을 구입할 수 있게 해준다. 등등

### 1.3.1 미디어 타입

MIME(Multipurpose Internet Mail Extensions, 다목적 인터넷 메일 확장)
- HTTP는 웹에서 전송되는 객체 각각에 MIME타입이라는 데이터 포맷 라벨을 붙인다.
- 각기 다른 전자메일 시스템 사이에서 메시지가 오갈 때 겪는 문제점을 해결하기 위해 설계
- 사선(/)으로 구분된 주 타입(primary object type)과 부 타입(specific subtype)으로 이루어진 문자열 라벨
- ex) JPEG이미지는 Content-type : image/jpeg 
- ex) HTML로 작성된 텍스트 문서는 Content-type : text/html

### 1.3.2 URI

URI란(uniform resource identifier, 통합 자원 식별자)
- 쉽게 말해 클라이언트가 관심 있는 리소스를 지목하는 것
- 혹은 인터넷의 우편물 주소 같은 것
- 정보 리소스를 고유하게 식별하고 위치를 지정 할 수 있다.
- ex) http://joes-hardware.com/spcials/saw-blade.gif
- URI는 URL, URN으로 두 종류의 자원 식별자가 있다.

### 1.3.3 URL

URL이란(uniform resource locator, 통합 자원 지시자)
- 리소스가 정확히 어디에 있고 어떻게 접근할 수 있는지 알려준다.
- URL의 첫 번째 부분은 스킴(scheme)이라고 불리는데, 리소스에 접근하기 위해 사용되는 프로토콜을 서술
- 두 번째 부분은 서버의 인터넷 주소를 제공
- 세 번째 부분은 웹서버의 리소스

### 1.3.4 URN

URN이란(uniform resource name, 유니폼 리소스 이름)
- 콘텐츠를 이루는 한 리소스에 대해, 그 리소스의 위치에 영향 받지 않는 유일무이한 이름 역할
- 여기저기 옮겨 다니거나, 여러종류의 네트워크 접속 프로토콜로 접근해도 문제 없다.

## 1.4 트랜잭션

HTTP 트랜잭션은
- 요청 명령 : 클라이언트 -> 서버
- 응답 명령 : 서버 -> 클라이언트로 이루어 져있다.
- 이 상호작용은 HTTP 메시지라고 불리는 정형화된 데이터 덩어리를 이용해 이루어진다.

### 1.4.1 메서드

모든 HTTP 요청 메시지는 한개의 메서드를 갖는다.
가장 대표적으로 흔히 쓰이는 HTTP 메서드는 아래와 같다.
1. GET : 서버에서 클라이언트로 지정한 리소스를 보내라.
2. PUT : 클라이언트에서 서버로 보낸 데이터를 지정한 이름의 리소스로 저장하라.
3. DELETE : 지정한 리소스를 서버에서 삭제하라.
4. POST : 클라이언트 데이터를 서버 게이트웨이 애플리케이션으로 보내라.
5. HEAD : 지정한 리소스에 대한 응답에서, HTTP 헤더 부분만 보내라.

### 1.4.2 상태 코드

모든 HTTP 응답 메시지는 상태 코드와 함께 반환된다.
- 요청이 성공했는지, 아니면 추가조치가 필요한지 알려주는 세 자리 숫자
- HTTP는 각 숫자 상태 코드에 텍스트로 된 '사유 구절(reason pharse)'를 함께 보낸다.

### 1.4.3 웹페이지는 여러 객체로 이루어질 수 있다.

애플리케이션은 하나의 작업을 수행하기 위해 여러 HTTP 트랜잭션을 수행한다.
웹 페이지는 보통 하나의 리소스가 아닌 리소스 모음이다.

## 1.5 메시지

요청 메시지 : 웹 클라이언트 -> 웹 서버 
응답 메시지 : 웹 서버 -> 웹 클라이언트

HTTP 메시지는 세 부분으로 나누어져있다.
1. 시작줄
	- 요청 : 무엇을 해야하는지
	- 응답 : 무슨일이 일어났는지 (성공 or 실패 등등)
2. 헤더
	- 0개 이상의 헤더 필드가 이어진다.
	- 쌍점(:) 으로 구분되어 있는 하나의 이름, 하나의 값으로 구성
	- 헤더는 빈줄로 끝난다.
3. 본문
	- 요청의 본문은 웹 서버로 데이터를 실어 보낸다.
	- 응답의 본문은 클라이언트로 데이터를 반환한다.
	- 본문은 시작줄 혹은 헤더와 달리 이진 데이터를 포함할 수 있다.(이미지, 비디오, 등등)
## 1.6 TCP 커넥션

TCP(Transmission Control Protocol, 전송 제어 프로토콜)

### 1.6.1 TCP/IP

HTTP는 애플리케이션 계층 프로토콜
TCP는 다음을 제공함
- 오류 없는 데이터 전송
- 순서에 맞는 전달(데이터는 언제나 보낸 순서대로 도착한다)
- 조각나지 않는 데이터 스트림(언제나 어떤 크기로든 보낼 수 있다.)

### 1.6.2 접속, IP 주소 그리고 포트번호

인터넷 프로토콜(IP, Internet Protocol) 주소와 포트번호를 사용해 클라이언트와 서버 사이에 TCP/IP 커넥션을 맺어야한다.
HTTP서버의 IP주소와 포트번호는 어떻게 알아낼까?
- URL을 이용하면 글자로된 도메인 명(Domain Name Service, DNS)라 불리는 장치를 통해 IP로 변환 될 수 있다.
- URL에 포트번호가 없는데, 포트번호가 빠진 경우에는 80이라고 가정하면 된다.

다음은 웹 브라우저가 어떻게 HTTP를 이용해서 멀리 떨어진 곳에 있는 서버의 단순한 HTML 리소스를 사용자에게 보여주는 지 묘사한다.
1. 웹 브라우저는 서버의 URL에서 호스트 명을 추출한다.
2. 웹 브라우저는 서버의 호스트 명을 IP로 변환한다.
3. 웹 브라우저는 URL에서 포트번호를 추출한다.
4. 웹 브라우저는 웹 서버와 TCP 커넥션을 맺는다.
5. 웹 브라우저는 서버에 HTTP요청을 보낸다
6. 서버는 웹 브라우저에 HTTP응답을 돌려준다
7. 커넥션이 닫히면, 웹 브라우저는 문서를 보여준다.

## 1.7 프로토콜 버전

HTTP/0.9
- 심각한 디자인 결함이 다수
- 구식 클라이언트하고만 같이 사용할 수 있음
- 오직 GET 메서드만 지원
- MIME 타입, HTTP 헤더, 버전 번호 지원x
- 간단한 HTML객체를 받아오기 위해 만들어 진것

HTTP/1.0
- HTTP 헤더, 추가 메서드, 멀티미디어 객체 처리 추가
- 웹페이지와 상호 작용하는 폼 실현

HTTP/1.0+
- "keep-alive" 커넥션
- 가상 호스팅 지원, 프락시 연결 지원

HTTP/1.1
- 구조적 결함 조정
- 두드러진 성능 최적화

HTTP/2.0
- 구글의 SPDY 프로토콜을 기반으로 설계 진행중인 프로토콜

## 1.8 웹의 구성 요소

- 프락시 - 클라이언트와 서버 사이에 위치한 HTTP 중개자
- 캐시 - 많이 찾는 웹 페이지를 클라이언트 가까이에 보관하는 HTTP 창고
- 게이트 웨이 - 다른 애플리케이션과 연결된 특별한 웹 서버
- 터널 - 단순히 HTTP 통신을 전달하기만 하는 특별한 프락시
- 에이전트 - 자동화된 HTTP 요청을 만드는 준 지능적(semi-intelligent) 웹 클라이언트

### 1.8.1 프락시

- 클라이언트 서버 사이에 위치
- 클라이언트의 모든 HTTP 요청을 받아 서버에 전달
- 주로 보안을 위해 사용된다.( 모든 웹 트래픽 흐름 속에서 신뢰할 만한 중개자 역할 )

### 1.8.2 캐시

- 자신을 거쳐가는 문서들 중 자주 찾는 것의 사본을 저장 해두는, 특별한 종류의 HTTP 프락시 서버
- 클라이언트는 멀리 떨어진 웹 서버보다 근처의 캐시에서 훨씬 더 빨리 문서를 다운 받을 수 있다.

### 1.8.3 게이트 웨이

- 다른 서버들의 중개자로 동작하는 특별한 서버
- 주로 HTTP 트래픽을 다른 프로토콜로 변환하기 위해 사용됨

### 1.8.4 터널

- 두 커넥션 사이에서 날(raw) 데이터를 열어보지 않고 그대로 전달해주는 HTTP 애플리케이션
- HTTP 터널은 주로 비 HTTP 데이터를 하나 이상의 HTTP 연결을 통해 그대로 전송해주기 위해 사용
- 대표적인 예로는 암호화된 SSL 트래픽을 HTTP 커넥션으로 전송함으로써 웹 트래픽만 허용하는 사내 방화벽을 통과시키는 것이 있음.

### 1.8.5 에이전트

- 사용자를 위해 HTTP 요청을 만들어주는 클라이언트 프로그램
- ex) 사람의 통제없이 스스로 웹을 돌아다니며 HTTP트랜잭션을 일으키고 콘텐츠를 받아오는 '스파이더', '로봇' 과 같이 다채로운 이름을 가지고 있는 자동화된 에이전트가 있다.

연결 문서 : [[2장 URL과 리소스]]