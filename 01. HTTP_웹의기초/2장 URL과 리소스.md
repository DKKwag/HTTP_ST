날짜 : 2023-03-25

태그 : #HTTP완벽가이드 #HTTP_웹의기초

# 2. URL과 리소스
## 2.1 인터넷의 리소스 탐색하기

- URL이란 통합 자원 식별자(Uniform Resource Identifier) 혹은 URI라고 불리는 더 일반화된 부류의 부분집합
- URN :  현재 그 리소스가 어디에 존재하든 상관없이 그 이름만으로 리소스를 식별한다.
- URL : 리소스가 어디 있는지 설명 후 식별한다.

ex) http://www.joes-hardware.com/seasonal/inde-fall.html URL을 불러오고싶은 경우
- URL의 첫 부분 http -> URL의 스킴이라고 한다. 스킴은 웹 클라이언트가 리소스에 어떻게 접근하는지 알려준다.
	- 스킴의 예) http, mailto, ftp, rtsp 등등
- URL의 두 번째 부분은 www.joes-hardware.com -> 서버의 위치다. 웹 클라이언트가 리소스가 어디에 호스팅 되어 있는지 알려준다.
- URL의 세 번째 부분인 /seasonal/index-fall.html -> 리소스의 경로다. 경로는 서버에 존재하는 로컬 리소스들 중에서 요청받은 리소스가 무엇인지 알려준다.

대부분의 URL은 '스킴://서버위치/경로' 구조로 이루어져 있다.

## 2.2 URL 문법

- URL 문법은 스킴에 따라서 달라진다.
- 대부분의 URL 스킴의 문법은 일반적으로 9개 부분으로 나뉜다.

- <스킴>://<사용자이름>:<비밀번호>@<호스트>:<포트>/<경로>;<파라미터>?<질의>#<프래그먼트>

### 2.2.1 스킴 : 사용할 프로토콜

- 스킴은 주어진 리소스에 어떻게 접근하는지 알려주는 중요한 정보
- 스킴 컴포넌트는 알파벳으로 시작해야한다.
- URL의 나머지 부분들과 쌍점(:)으로 구분한다 ex)http://
- 스킴명은 대소문자를 가리지 않는다.

### 2.2.2 호스트와 포트

- URL의 호스트와 포트는 리소스를 찾기위해 호스팅 하고있는 장비와 그 장비내에서 리소스에 접근 할 수 있는 서버가 어디에 있는지 정보를 제공해준다.
- 호스트 컴포넌트는 접근하려고 하는 리소스를 가지고 있는 인터넷 상의 호스트 장비를 가리킴
- 포트 컴포넌트는 서버가 열어놓은 네트워크 포트를 가리킨다.
	- 내부적으로 TCP프로토콜을 사용하는 HTTP는 기본 포트 80을 사용한다.

### 2.2.3 사용자 이름과 비밀번호

- 사용자이름을 넣지 않으면 기본값으로 'anonymous' 
- 비밀번호를 넣지않으면 기본값으로 브라우저마다 가지고 있는 기본 값을 사용한다(ex) 인터넷 익스플로러는 'IEUser')
- '@'문자는 URL로부터 사용자 이름과, 비밀번호 컴포넌트를 분리 시킨다.
- FTP서버로 보여주는 예시)
	- ftp://anonymous:my_passwd@ftp.prep.ai.mit.edu/pub/gnu
- 여기서 아이디는 anonymous, 비밀번호는 my_passwd로 나와 있고 @로 사용자이름, 비밀번호를 URL과 구분지었다.

### 2.2.4 경로

경로 컴포넌트는 리소스가 서버의 어디에 있는지 알려준다.
- '/'문자를 기준으로 경로조각으로 나뉜다.
- 각 경로조각은 자체만의 파라미터 컴포넌트를 가질 수 있다.

### 2.2.5 파라미터

- URL의 파라미터 컴포넌트는, 애플리케이션이 서버에 정확한 요청을 하기 위해 필요한 입력 파리미터를 받는데 사용한다.
- 이 컴포넌트는 이름/값 쌍의 리스트
- URL 나머지 부분들로부터 ';'문자로 구분
- 예시) ftp://prep.ai.mit.edu/pub/gnu; type=d
	- 이 경우 이름은 'type', 값은 'd' 단 한개의 파라미터를 전달
- 예시2) http://www.joes-hardware.com/hammers;sale=false/index.html;graphics=true
	- 이 경우 두 개의 경로조각이 있다.
	- hammers 경로조각은 값이 false인 sale이라는 파라미터
	- index.html 경로조각은 값이 true인 graphics라는 파라미터

### 2.2.6 질의 문자열

- 요청 받을 리소스 형식의 범위를 좁히기 위해서 질문이나 질의를 받을 수 있다.
- ex) http://www.joes-hardware.com/inventory-check.cgi?item=12731&color=blue
- 물음표(?) 우측에 있는 값들이 질의 컴포넌트이다.
- 이 질의는 제품번호가12731이고 색깔이 블루인 재고가 있는지 검사하는 질의이다.

### 2.2.7 프래그먼트

- HTML같은 리소스 형식들은 본래의 수준보다 더 작게 나뉠 수 있다.

- 리소스의 특정 부분을 가리킬수 있도록,  URL은 리소스내의 조각을 가리킬 수 있는 프래그먼트 컴포넌트를 제공한다.
- 프래그먼트는 URL의 우측에 # 문자에 이어서 온다.
- ex) http://joes-hardware.com/tools.html#drills
- 여기서 웹 서버에 위치한 /tools.html 웹페이지의 일부를 가르킨다 그 부분을 'drills' 라고 기술하였다.

## 2.3 단축 URL

- 많은 브라우저가 사용자가 기억하고 있는 URL일부를 입력하면 나머지 부분을 자동으로 입력해주는 URL '자동 확장'을 지원한다.

### 2.3.1 상대 URL

- URL은 상대URL, 절대URL로 나뉜다.
- 기존에 보던 URL들은 전부 절대 URL이다.
- 상대 URL로 필요한 정보를 얻을 시 기저(base)라고 하는 다른 URL을 사용해야 한다.
- 상대 URL문법은 스킴, 호스트, 다른 컴포넌트를 모두 입력하지 않아도 된다.
- 상대 URL은 프래그먼트 이거나 URL의 일부이다.

### 2.3.2 URL 확장

- 호스트명 확장 : 단순한 휴리스틱만을 사용해서 입력한 호스트명을 전체 호스트 명으로 확장 할 수있다.
- ex) yahoo를 검색하면 자동으로 www.과 .com을 붙여서 www.yahoo.com을 만든다.
- 히스토리 확장 : 과거에 사용자가 방문했던 URL의 기록을 저장해 놓는 것
- ex) http://www.joes- 를 입력하면 자동으로 http://www.joes-hardware.com을 보여준다.

## 2.4 안전하지 않은 문자

### 2.4.1 URL 문자 집합
- 기존 URL은 US-ASCII 문자집합을 사용
- 그러나 URL은 세계 사람들이 편리하게 쓰기 위해 또한, 특정 이진데이터를 포함하기 위해 URL 설계자들은 URL에 이스케이프 문자열을 쓸 수 있도록 설계

### 2.4.2 인코딩 설계

- URL에 있는 안전하지 않은 문자들을 표현할 수 있는 인코딩 방식이 고안됨
- 안전하지 않은 문자를 퍼센티지 기호(%), ASCII코드로 표현되는 두개의 16진수 숫자로 이루어진 '이스케이프' 문자로 바꾼다.

### 2.4.3 문자 제한

- 몇몇 문자는 URL 내에서 특별한 의미로 예약되어 있음.
- % : 인코딩된 문자에 사용할 이스케이프 토큰으로 선점
- / : 경로 컴포넌트에 있는 경로 세그먼트를 나누는 용도로 선점
- . : 경로 컴포넌트에서 선점
- 등등등

## 2.5 스킴의 바다

- 대표적인 스킴
- http : 사용자 이름이나 비밀번호가 없다는 것을 제외하고는, 일반 URL포맷을 지키는 하이퍼 텍스트 전송 프로토콜 스킴. 포트값이 생략되어 있으면 기본값은 80
- ex) http://<호스트>:<포트>/<경로>?<질의>#<프래그먼트>
- https : http스킴과 거의 같다. 다른점은 https는 http의 커넥션의 양 끝단에서 암호화 하기위해서 넷스케이프에서 개발한 보안 소켓 계층(SSL)을 사용한다. 기본 포트값은 443
- ex) https://<호스트>:<포트>/<경로>?<질의>#<프래그먼트>
- ftp : 파일 전송 프로토콜 URL은 파일을 내려 받거나 올리고, FTP서버의 디렉터리에 있는 콘텐츠 목록을 가져오는데 사용할 수 있다.
- ex) ftp://<사용자이름>:<비밀번호>@<호스트>:<포트>/<경로>:<파라미터>







연결 문서 : [[1장 HTTP 개관]]